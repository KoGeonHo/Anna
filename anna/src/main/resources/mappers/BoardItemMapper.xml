<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 
<mapper namespace="edu.fourmen.mapper.boardItemMapper">
	
<<<<<<< HEAD
	<select id="selectAll" resultType="BoardItemVO" parameterType="BoardItemVO"  >
=======
	<select id="selectAll" resultType="BoardItemVO" parameterType="pagemaker" >
>>>>>>> parent of 7248137 (Merge branch 'master' into seongmin)
		SELECT b.item_idx
			 , b.Title
			 , b.uidx
			 , b.Contents
			 , b.wdate
			 , u.nickName
<<<<<<< HEAD
=======
			 , b.Price
>>>>>>> parent of 7248137 (Merge branch 'master' into seongmin)
			 , b.image1
			FROM Board_Items b, AnnaUser u
			WHERE b.uidx = u.uidx  ORDER BY b.item_idx desc LIMIT #{startPage}, #{perPageNum}
			 <!-- <if test='searchType != null and searchType.equals("All")'>
           AND b.Contents like concat('%',#{SearchVal},'%')
           OR u.nickname like concat('%',#{SearchVal},'%')
          OR b.Title like concat('%',#{SearchVal},'%')   
       </if>
      <if test='searchType != null and searchType.equals("title")'>
          AND b.Title like concat('%',#{SearchVal},'%')
       </if>
       <if test='searchType != null and searchType.equals("contentWriter")'>
          AND b.Contents like concat('%',#{SearchVal},'%')
          OR u.nickname like concat('%',#{SearchVal},'%')
       </if>
	
		limit #{startPage} , #{pageNum} -->
		
	</select>
	
	<!-- 
<select id="totalcount" parameterType="BoardItemVO" resultType="int">
   SELECT COUNT(item_idx)
     FROM Board_Items b
     INNER JOIN AnnaUser u
        ON b.uidx = u.uidx
    WHERE b.isDel = 'N'
        <if test='searchType != null and searchType.equals("All")'>
           AND b.Contents like concat('%',#{SearchVal},'%')
           OR u.nickname like concat('%',#{SearchVal},'%')
          OR b.Title like concat('%',#{SearchVal},'%')   
       </if>
      <if test='searchType != null and searchType.equals("title")'>
          AND b.Title like concat('%',#{SearchVal},'%')
       </if>
       <if test='searchType != null and searchType.equals("contentWriter")'>
          AND b.Contents like concat('%',#{SearchVal},'%')
          OR u.nickname like concat('%',#{SearchVal},'%')
          
       </if>
</select> -->
	
	<select id="totalcount" resultType="Integer">
		<![CDATA[
			SELECT 
				count(*)
			FROM Board_Items
		]]>
	</select>
	
	
	<insert id="boarditemswrite" parameterType="BoardItemVO">
	insert into Board_Items(
						uidx
						,cate_idx
						,Title
						,Contents
						,wdate
						,addr1
						,addr2
						,addr_Code
						,image1
						,image2
						,image3
						,image4
						,image5
						,image6
						,image7
						,image8
						,image9
						,image10
						,Keyword
						,Price
						,offer
						,hit
						,state
						
						) VALUES(
						1
						,#{cate_idx}
						,#{title}
						,#{content}
						,now()
						,#{addr1}
						,#{addr2}
						,#{addr_code}
						,#{image1}
						,#{image2}
						,#{image3}
						,#{image4}
						,#{image5}
						,#{image6}
						,#{image7}
						,#{image8}
						,#{image9}
						,#{image10}
						,#{keyword}
						,#{price}
						,#{offer}
						,1
						,#{state}
						)
	</insert>
	<select id="selectitem" parameterType="int" resultType="BoardItemVO">
		SELECT b.item_idx
			 , b.Title
			 , b.uidx
			 , b.Contents
			 , b.wdate
			 , b.cate_idx
			 , image1
			 , image2
			 , image3
			 , image4
			 , image5
			 , image6
			 , image7
			 , image8
			 , image9
			 , image10
			 , u.nickname
			 , b.Keyword
			 , b.Price
			 , b.offer
			 , b.state
			 
		FROM Board_Items b , AnnaUser u
		WHERE b.uidx = u.uidx
		AND b.item_idx = #{item_idx}
	</select>
<<<<<<< HEAD
	
=======
	<update id="itemsmodify" parameterType="BoardItemVO">
	Update Board_Items Set
						cate_idx = #{cate_idx}
						,Title = #{title}
						,Contents = #{content}
						,wdate = now()
						,addr1 = #{addr1}
						,addr2 = #{addr2}
						,addr_Code = #{addr_code}
						,image1 = #{image1}
						,image2 = #{image2}
						,image3 = #{image3}
						,image4 = #{image4}
						,image5 = #{image5}
						,image6 = #{image6}
						,image7 = #{image7}
						,image8 = #{image8}
						,image9 = #{image9}
						,image10 = #{image10}
						,Keyword = #{keyword}
						,Price = #{price}
						,offer = #{offer}
						,hit = 1 
						,state = #{state}
						,isDel = 'N'
						
						where item_itdx = #{item_idx}
						
	</update>
	
	<update id="itemdelete" parameterType="int">
		update Board_Items Set
			isDel = 'Y'
		where item_idx = #{item_idx}
	</update>
>>>>>>> parent of 7248137 (Merge branch 'master' into seongmin)
	
</mapper>