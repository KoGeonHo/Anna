<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="edu.fourmen.mapper.adminMapper">

	<select id="selectadminUser" resultType="UserVO">
		SELECT uidx		
		,nickname
		,user_Email
		,isAdmin
		,DATE_FORMAT(jdate, '%Y-%m-%d') AS jdate
		FROM 
			AnnaUser	
		WHERE
			isDel='N'
	</select>
	
	<select id="selectadminQna" resultType="QnAVO">
		SELECT a.qidx
		,a.qType
		,a.title
		,a.contents
		,a.state
		,DATE_FORMAT(a.wdate, '%Y-%m-%d') AS wdate
		,a.uidx, (
		 select nickName from AnnaUser b where b.uidx = a.uidx 
		   )as userNickName  from QnA a 
		   WHERE
			isDel='N'
	</select>

	<select id="getReportList" resultType="ReportVO">
	
		SELECT
			ridx,
			bidx,
			item_idx,
			repoter,
			target,
			evidence,
			attach,
			report_type,
			contents,
			DATE_FORMAT(report_date, '%Y-%m-%d') AS report_date,
			ban,
			ban_date
		FROM
			report
		
	</select>

	
	<update id="toggleAdmin" parameterType="UserVO">
	
		UPDATE 
			AnnaUser
		SET
			isAdmin = #{isAdmin}
		WHERE
			uidx = #{uidx}
	</update>
	
</mapper>




